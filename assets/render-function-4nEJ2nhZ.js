import{a as f}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();let C=[];function F(){localStorage.setItem("cards",JSON.stringify(C))}const b="cart";function l(){return JSON.parse(localStorage.getItem(b))||[]}function P(t){localStorage.setItem(b,JSON.stringify(t))}function B(t){const e=l();e.push(t),P(e)}function A(t){let e=l();e=e.filter(o=>o.id!==t),P(e)}function L(t){return l().some(e=>e.id===t)}function S(){const t=JSON.parse(localStorage.getItem("cart"))||[],e=document.querySelector("[data-cart-count]");e&&(e.textContent=t.length)}async function j(){const t="https://dummyjson.com/products/category-list";try{return(await f.get(t)).data}catch(e){throw console.error("Помилка під час отримання категорій:",e.message),e}}async function H(t){const o=`https://dummyjson.com/products/category/${t}?limit=12&skip=0`;try{return(await f.get(o)).data.products}catch(n){throw console.error("Помилка під час отримання продуктів:",n.message),n}}async function q(){const e="https://dummyjson.com/products?limit=12&skip=0";try{return(await f.get(e)).data.products}catch(o){throw console.error("Помилка під час отримання продуктів:",o.message),o}}async function U(t){const e=await fetch(`https://dummyjson.com/products/${t}`);if(!e.ok)throw new Error("Failed to fetch product");return await e.json()}async function J(t){const e=`https://dummyjson.com/products/search?q=${encodeURIComponent(t)}&limit=12`;try{return(await f.get(e)).data.products}catch(o){throw console.error("Помилка під час пошуку продуктів:",o.message),o}}const c={formEl:document.querySelector(".search-form"),inputEl:document.querySelector(".search-form__input"),clearSearchBtnEl:document.querySelector(".search-form__btn-clear"),searchBtnEl:document.querySelector(".search-form__btn"),categoriesListEl:document.querySelector(".categories"),productsListEl:document.querySelector(".products"),loadMoreBtn:document.querySelector(".btn"),loaderEl:document.querySelector(".loader"),modalEl:document.querySelector(".modal"),modalCloseBtnEl:document.querySelector(".modal__close-btn"),modalContentEl:document.querySelector(".modal__content"),modalOverlayEl:document.querySelector(".modal__overlay"),notFound:document.querySelector(".not-found"),modalProductBtnCart:document.querySelector(".modal-product__btn--cart"),modalProductBtnWishlist:document.querySelector(".modal-product__btn--wishlist"),cartPageProduct:document.querySelector(".product-page .products"),buyBtn:document.querySelector(".cart-summary__btn"),wishlistPageProduct:document.querySelector(".js-wishlist-product")};function E(t){R(t),c.modalEl.classList.add("modal--is-open")}function v(){c.modalEl.classList.remove("modal--is-open");const t=c.modalContentEl.querySelector(".modal-product");t&&(t.innerHTML="")}c.modalEl.addEventListener("click",t=>{(t.target.classList.contains("modal__close-btn")||t.target===c.modalEl)&&v()});document.addEventListener("keydown",t=>{t.key==="Escape"&&v()});function M(){const t=document.querySelector(".not-found");t&&t.classList.add("not-found--visible")}function k(){const t=document.querySelector(".not-found");t&&t.classList.remove("not-found--visible")}function T(){c.loadMoreBtn&&(c.loadMoreBtn.classList.remove("is-hidden"),c.loadMoreBtn.classList.add("is-visible"))}function D(){c.loadMoreBtn&&(c.loadMoreBtn.classList.add("is-hidden"),c.loadMoreBtn.classList.remove("is-visible"))}function K(){const t=document.querySelector(".loader");t&&(t.classList.remove("is-hidden"),t.classList.add("is-visible"))}function I(){const t=document.querySelector(".loader");t&&(t.classList.add("is-hidden"),t.classList.remove("is-visible"))}function Y(){document.querySelectorAll(".loader-page").forEach(t=>{t.classList.remove("is-hidden"),t.classList.add("is-visible")})}function G(){document.querySelectorAll(".loader-page").forEach(t=>{t.classList.add("is-hidden"),t.classList.remove("is-visible")})}function O(t){const e=t.target.closest(".products__item");if(!e)return;const o=e.dataset.id,n=C.find(r=>r.id===Number(o));n&&E(n)}const $=document.querySelector(".products");function N(t){return t.map(e=>`<li class="categories__item">
   <button class="categories__btn" type="button" data-category="${e}">${e}</button>
 </li>
`).join("")}function y(t){return t.map(e=>`<li class="products__item" data-id="${e.id}">
                  <img class="products__image" src="${e.thumbnail}" alt="${e.title}"/>
                   <p class="products__title">${e.title}</p>
                    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${e.brand}</p>
                    <p class="products__category">Category: ${e.category}</p>
                    <p class="products__price">Price: ${e.price} $</p>
 </li>
`).join("")}async function W(){c.categoriesListEl.classList.add("hidden"),c.productsListEl.classList.add("hidden"),document.querySelector(".not-found").classList.add("is-hidden");try{const t=await j(),e=await q(),o=N(t),n=y(e),r=document.querySelector(".categories"),s=document.querySelector(".products");r.insertAdjacentHTML("beforeend",o),e.length===0?document.querySelector(".not-found").classList.remove("is-hidden"):(s.insertAdjacentHTML("beforeend",n),c.productsListEl.classList.remove("hidden")),T(),c.categoriesListEl.classList.remove("hidden"),s.addEventListener("click",a=>{const u=a.target.closest(".product-card");if(!u)return;const m=u.dataset.id;m&&E(m)})}catch(t){console.error("Помилка при ініціалізації сторінки:",t.message)}finally{I()}}function z(){$.innerHTML=""}async function Q(t){try{const e=await q(),o=y(e);$.insertAdjacentHTML("beforeend",o)}catch(e){console.error("Error fetching products:",e.message)}}async function R(t){const{id:e,images:o,title:n,description:r,tags:s,shippingInformation:a,returnPolicy:u,price:m}=t,h=c.modalContentEl.querySelector(".modal-product");if(!h){console.warn("Element .modal-product not found");return}h.innerHTML=`
    <img class="modal-product__img" src="${o[0]}" alt="${n}" />
    <div class="modal-product__content">
      <p class="modal-product__title">${n}</p>
      <ul class="modal-product__tags">${s==null?void 0:s.map(d=>`<li>${d}</li>`).join("")}</ul>
      <p class="modal-product__description">${r}</p>
      <p class="modal-product__shipping-information">Shipping: ${a||"Not specified"}</p>
      <p class="modal-product__return-policy">Return Policy: ${u||"Not specified"}</p>
      <p class="modal-product__price">Price: ${m}$</p>
      <button class="modal-product__buy-btn" type="button">Buy</button>
    </div>
  `;const i=c.modalContentEl.querySelector(".modal-product__btn--cart");if(!i)return;const w=L(e);i.textContent=w?"Remove from Cart":"Add to Cart",i.onclick=()=>{const d=document.querySelector(".products");if(L(e)){A(e),i.textContent="Add to Cart";const p=d==null?void 0:d.querySelector(`.products__item[data-id="${e}"]`);p&&p.remove();const _=l();S(),g(_),_.length===0&&M()}else{if(B(t),i.textContent="Remove from Cart",d){const p=y([t]);d.insertAdjacentHTML("beforeend",p)}S()}}}function V(){c.productsListEl?c.productsListEl.addEventListener("click",O):console.warn("refs.productsListEl не знайдено")}function X(){const t=l(),e=document.querySelector(".products");if(e.innerHTML="",t.length===0){M(),g(t);return}k();const o=y(t);e.insertAdjacentHTML("beforeend",o),g(t)}function g(t){const e=document.querySelector("[data-count]"),o=document.querySelector("[data-price]"),n=t.length,r=t.reduce((s,a)=>s+a.price,0);e.textContent=n,o.textContent=`$${r.toFixed(2)}`}export{V as a,D as b,z as c,K as d,I as e,H as f,C as g,G as h,W as i,F as j,y as k,T as l,J as m,M as n,k as o,q as p,Q as q,c as r,Y as s,U as t,S as u,E as v,X as w,l as x};
//# sourceMappingURL=render-function-4nEJ2nhZ.js.map
