import"./assets/styles-D1j4IURZ.js";import{a as E,i}from"./assets/vendor-4yCzdkXl.js";async function w(){const t="https://dummyjson.com/products/category-list";try{return(await E.get(t)).data}catch(e){throw console.error("Помилка під час отримання категорій:",e.message),e}}async function C(t){const o=`https://dummyjson.com/products/category/${t}?limit=12&skip=0`;try{return(await E.get(o)).data.products}catch(s){throw console.error("Помилка під час отримання продуктів:",s.message),s}}async function _(){const e="https://dummyjson.com/products?limit=12&skip=0";try{return(await E.get(e)).data.products}catch(o){throw console.error("Помилка під час отримання продуктів:",o.message),o}}async function $(t){const e=await fetch(`https://dummyjson.com/products/${t}`);if(!e.ok)throw new Error("Failed to fetch product");return await e.json()}const r={formEl:document.querySelector(".search-form"),inputEl:document.querySelector(".search-form__input"),clearSearchBtnEl:document.querySelector(".search-form__btn-clear"),searchBtnEl:document.querySelector(".search-form__btn"),categoriesListEl:document.querySelector(".categories"),productsListEl:document.querySelector(".products"),loadMoreBtn:document.querySelector(".btn"),loaderEl:document.querySelector(".loader"),modalEl:document.querySelector(".modal"),modalCloseBtnEl:document.querySelector(".modal__close-btn"),modalContentEl:document.querySelector(".modal__content"),modalOverlayEl:document.querySelector(".modal__overlay")};let n=[];function S(){localStorage.setItem("cards",JSON.stringify(n))}function k(){const t=localStorage.getItem("cards");t&&(n=JSON.parse(t))}function v(t){H(t),r.modalEl.classList.add("modal--is-open")}function b(){r.modalEl.classList.remove("modal--is-open");const t=r.modalContentEl.querySelector(".modal-product");t&&(t.innerHTML="")}r.modalEl.addEventListener("click",t=>{(t.target.classList.contains("modal__close-btn")||t.target===r.modalEl)&&b()});document.addEventListener("keydown",t=>{t.key==="Escape"&&b()});const M=document.querySelector(".products");function B(t){return t.map(e=>`<li class="categories__item">
   <button class="categories__btn" type="button" data-category="${e}">${e}</button>
 </li>
`).join("")}function p(t){return t.map(e=>`<li class="products__item" data-id="${e.id}">
                  <img class="products__image" src="${e.thumbnail}" alt="${e.title}"/>
                   <p class="products__title">${e.title}</p>
                    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${e.brand}</p>
                    <p class="products__category">Category: ${e.category}</p>
                    <p class="products__price">Price: ${e.price} $</p>
 </li>
`).join("")}async function T(){r.categoriesListEl.classList.add("hidden"),r.productsListEl.classList.add("hidden"),document.querySelector(".not-found").classList.add("is-hidden"),m();try{const t=await w(),e=await _(),o=B(t),s=p(e),c=document.querySelector(".categories"),f=document.querySelector(".products");c.insertAdjacentHTML("beforeend",o),e.length===0?document.querySelector(".not-found").classList.remove("is-hidden"):(f.insertAdjacentHTML("beforeend",s),r.productsListEl.classList.remove("hidden")),r.categoriesListEl.classList.remove("hidden"),f.addEventListener("click",L=>{const g=L.target.closest(".product-card");if(!g)return;const l=g.dataset.id;l&&v(l)})}catch(t){console.error("Помилка при ініціалізації сторінки:",t.message)}finally{a()}}function P(){M.innerHTML=""}function u(){r.loadMoreBtn&&(r.loadMoreBtn.classList.remove("is-hidden"),r.loadMoreBtn.classList.add("is-visible"))}function h(){r.loadMoreBtn&&(r.loadMoreBtn.classList.add("is-hidden"),r.loadMoreBtn.classList.remove("is-visible"))}function m(){const t=document.querySelector(".loader");t&&(t.classList.remove("is-hidden"),t.classList.add("is-visible"))}function a(){const t=document.querySelector(".loader");t&&(t.classList.add("is-hidden"),t.classList.remove("is-visible"))}function A(){document.querySelectorAll(".loader-page").forEach(t=>{t.classList.remove("is-hidden"),t.classList.add("is-visible")})}function j(){document.querySelectorAll(".loader-page").forEach(t=>{t.classList.add("is-hidden"),t.classList.remove("is-visible")})}async function I(t){try{const e=await _(),o=p(e);M.insertAdjacentHTML("beforeend",o)}catch(e){console.error("Error fetching products:",e.message)}}r.productsListEl.addEventListener("click",t=>{const e=t.target.closest(".products__item");if(!e)return;const o=e.dataset.id,s=n.find(c=>c.id===Number(o));s&&v(s)});async function N(){if(n.length>0){const t=p(n);r.productsListEl.insertAdjacentHTML("beforeend",t),u()}}async function H(t){const{images:e,title:o,description:s,tags:c,shippingInformation:f,returnPolicy:L,price:g}=t,l=r.modalContentEl.querySelector(".modal-product");if(!l){console.warn("Element .modal-product not found");return}l.innerHTML=`
    <img class="modal-product__img" src="${e[0]}" alt="${o}" />
    <div class="modal-product__content">
      <p class="modal-product__title">${o}</p>
      <ul class="modal-product__tags">${c==null?void 0:c.map(q=>`<li>${q}</li>`).join("")}</ul>
      <p class="modal-product__description">${s}</p>
      <p class="modal-product__shipping-information">Shipping: ${f||"Not specified"}</p>
      <p class="modal-product__return-policy">Return Policy: ${L||"Not specified"}</p>
      <p class="modal-product__price">Price: ${g}$</p>
      <button class="modal-product__buy-btn" type="button">Buy</button>
    </div>
  `}document.addEventListener("DOMContentLoaded",async()=>{A(),await T(),j(),k(),N()});let y="",d=1;const R=12;r.categoriesListEl.addEventListener("click",async t=>{if(t.target===t.currentTarget)return;const e=t.target.dataset.category;if(!e)return;r.categoriesListEl.querySelectorAll(".categories__btn").forEach(s=>s.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active"),d=1,P(),h(),m();try{const s=await C(e);if(s.length===0){i.error({title:"Error",message:"No products found in this category.",position:"topCenter"}),a();return}n.length=0,n.push(...s),S();const c=p(s);r.productsListEl.insertAdjacentHTML("beforeend",c),u()}catch(s){console.error("Error fetching products:",s.message)}finally{a()}});r.formEl.addEventListener("submit",async t=>{if(t.preventDefault(),y=r.inputEl.value.trim(),!y){i.error({title:"Error",message:"Please enter a search query.",position:"topCenter"});return}d=1,P(),m(),h();try{const e=await _(y,d,R);if(e.length===0){i.error({title:"Error",message:"No products found.",position:"topCenter"}),a();return}n.length=0,n.push(...e),S();const o=p(e);r.productsListEl.insertAdjacentHTML("beforeend",o),u()}catch(e){console.error("Error fetching products:",e.message)}finally{a(),r.formEl.reset()}});r.loadMoreBtn.addEventListener("click",async()=>{d+=1,m(),h();const t=Date.now(),e=2e3;try{const o=await _(y,d);if(o.length===0){i.error({title:"Error",message:"No more products found.",position:"topCenter"}),h();return}I(o)}catch{i.error({title:"Error",message:"Failed to load products.",position:"topCenter"})}finally{const o=Date.now()-t,s=e-o;s>0?setTimeout(()=>{u(),a()},s):(a(),u())}});r.clearSearchBtnEl.addEventListener("click",()=>{r.inputEl.value="",d=1,i.info({title:"Info",message:"Search cleared.",position:"topCenter"})});r.productsListEl.addEventListener("click",async t=>{const e=t.target.closest(".products__item");if(!e)return;const o=e.dataset.id;if(o)try{m();const s=await $(o);v(s)}catch(s){i.error({title:"Error",message:"Failed to load product details.",position:"topCenter"}),console.error("Error loading product:",s)}finally{a()}});
//# sourceMappingURL=index.js.map
