import"./assets/styles-XcnS6RU7.js";import{a as g,i as c}from"./assets/vendor-4yCzdkXl.js";async function M(){const t="https://dummyjson.com/products/category-list";try{return(await g.get(t)).data}catch(e){throw console.error("Помилка під час отримання категорій:",e.message),e}}async function q(t){const o=`https://dummyjson.com/products/category/${t}?limit=12&skip=0`;try{return(await g.get(o)).data.products}catch(s){throw console.error("Помилка під час отримання продуктів:",s.message),s}}async function _(){const e="https://dummyjson.com/products?limit=12&skip=0";try{return(await g.get(e)).data.products}catch(o){throw console.error("Помилка під час отримання продуктів:",o.message),o}}async function C(t){const e=await fetch(`https://dummyjson.com/products/${t}`);if(!e.ok)throw new Error("Failed to fetch product");return await e.json()}async function $(t){const e=`https://dummyjson.com/products/search?q=${encodeURIComponent(t)}&limit=12`;try{return(await g.get(e)).data.products}catch(o){throw console.error("Помилка під час пошуку продуктів:",o.message),o}}const r={formEl:document.querySelector(".search-form"),inputEl:document.querySelector(".search-form__input"),clearSearchBtnEl:document.querySelector(".search-form__btn-clear"),searchBtnEl:document.querySelector(".search-form__btn"),categoriesListEl:document.querySelector(".categories"),productsListEl:document.querySelector(".products"),loadMoreBtn:document.querySelector(".btn"),loaderEl:document.querySelector(".loader"),modalEl:document.querySelector(".modal"),modalCloseBtnEl:document.querySelector(".modal__close-btn"),modalContentEl:document.querySelector(".modal__content"),modalOverlayEl:document.querySelector(".modal__overlay"),notFound:document.querySelector(".not-found")};let i=[];function v(){localStorage.setItem("cards",JSON.stringify(i))}function E(t){F(t),r.modalEl.classList.add("modal--is-open")}function S(){r.modalEl.classList.remove("modal--is-open");const t=r.modalContentEl.querySelector(".modal-product");t&&(t.innerHTML="")}r.modalEl.addEventListener("click",t=>{(t.target.classList.contains("modal__close-btn")||t.target===r.modalEl)&&S()});document.addEventListener("keydown",t=>{t.key==="Escape"&&S()});function k(){const t=document.querySelector(".not-found");t&&t.classList.add("not-found--visible")}function B(){const t=document.querySelector(".not-found");t&&t.classList.remove("not-found--visible")}function l(){r.loadMoreBtn&&(r.loadMoreBtn.classList.remove("is-hidden"),r.loadMoreBtn.classList.add("is-visible"))}function m(){r.loadMoreBtn&&(r.loadMoreBtn.classList.add("is-hidden"),r.loadMoreBtn.classList.remove("is-visible"))}function y(){const t=document.querySelector(".loader");t&&(t.classList.remove("is-hidden"),t.classList.add("is-visible"))}function a(){const t=document.querySelector(".loader");t&&(t.classList.add("is-hidden"),t.classList.remove("is-visible"))}function T(){document.querySelectorAll(".loader-page").forEach(t=>{t.classList.remove("is-hidden"),t.classList.add("is-visible")})}function A(){document.querySelectorAll(".loader-page").forEach(t=>{t.classList.add("is-hidden"),t.classList.remove("is-visible")})}function j(t){const e=t.target.closest(".products__item");if(!e)return;const o=e.dataset.id,s=i.find(n=>n.id===Number(o));s&&E(s)}console.log(r);const b=document.querySelector(".products");function I(t){return t.map(e=>`<li class="categories__item">
   <button class="categories__btn" type="button" data-category="${e}">${e}</button>
 </li>
`).join("")}function h(t){return t.map(e=>`<li class="products__item" data-id="${e.id}">
                  <img class="products__image" src="${e.thumbnail}" alt="${e.title}"/>
                   <p class="products__title">${e.title}</p>
                    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${e.brand}</p>
                    <p class="products__category">Category: ${e.category}</p>
                    <p class="products__price">Price: ${e.price} $</p>
 </li>
`).join("")}async function N(){r.categoriesListEl.classList.add("hidden"),r.productsListEl.classList.add("hidden"),document.querySelector(".not-found").classList.add("is-hidden");try{const t=await M(),e=await _(),o=I(t),s=h(e),n=document.querySelector(".categories"),u=document.querySelector(".products");n.insertAdjacentHTML("beforeend",o),e.length===0?document.querySelector(".not-found").classList.remove("is-hidden"):(u.insertAdjacentHTML("beforeend",s),r.productsListEl.classList.remove("hidden")),l(),r.categoriesListEl.classList.remove("hidden"),u.addEventListener("click",L=>{const p=L.target.closest(".product-card");if(!p)return;const d=p.dataset.id;d&&E(d)})}catch(t){console.error("Помилка при ініціалізації сторінки:",t.message)}finally{a()}}function P(){b.innerHTML=""}async function R(t){try{const e=await _(),o=h(e);b.insertAdjacentHTML("beforeend",o)}catch(e){console.error("Error fetching products:",e.message)}}async function F(t){const{images:e,title:o,description:s,tags:n,shippingInformation:u,returnPolicy:L,price:p}=t,d=r.modalContentEl.querySelector(".modal-product");if(!d){console.warn("Element .modal-product not found");return}d.innerHTML=`
    <img class="modal-product__img" src="${e[0]}" alt="${o}" />
    <div class="modal-product__content">
      <p class="modal-product__title">${o}</p>
      <ul class="modal-product__tags">${n==null?void 0:n.map(w=>`<li>${w}</li>`).join("")}</ul>
      <p class="modal-product__description">${s}</p>
      <p class="modal-product__shipping-information">Shipping: ${u||"Not specified"}</p>
      <p class="modal-product__return-policy">Return Policy: ${L||"Not specified"}</p>
      <p class="modal-product__price">Price: ${p}$</p>
      <button class="modal-product__buy-btn" type="button">Buy</button>
    </div>
  `}function H(){r.productsListEl?r.productsListEl.addEventListener("click",j):console.warn("refs.productsListEl не знайдено")}document.addEventListener("DOMContentLoaded",async()=>{T(),await new Promise(t=>setTimeout(t,100));try{await N(),H()}catch(t){console.error("Помилка під час ініціалізації сторінки:",t.message)}finally{A(),document.getElementById("content").classList.remove("is-hidden")}});let D="",f=1;r.categoriesListEl.addEventListener("click",async t=>{if(t.target===t.currentTarget)return;const e=t.target.dataset.category;if(!e)return;r.categoriesListEl.querySelectorAll(".categories__btn").forEach(s=>s.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active"),f=1,P(),m(),y();try{const s=await q(e);if(s.length===0){c.error({title:"Error",message:"No products found in this category.",position:"topCenter"}),a();return}i.length=0,i.push(...s),v();const n=h(s);r.productsListEl.insertAdjacentHTML("beforeend",n),l()}catch(s){console.error("Error fetching products:",s.message)}finally{a()}});r.formEl.addEventListener("submit",async t=>{t.preventDefault();const e=r.inputEl.value.trim();if(!e){c.error({title:"Error",message:"Please enter a search query.",position:"topCenter"});return}P(),m(),y();try{const o=await $(e);if(!o||o.length===0){k();return}B(),i.length=0,i.push(...o),v();const s=h(o);r.productsListEl.insertAdjacentHTML("beforeend",s),l()}catch(o){console.error("Search error:",o.message),c.error({title:"Error",message:"Something went wrong. Please try again.",position:"topCenter"})}finally{a(),r.formEl.reset()}});r.loadMoreBtn.addEventListener("click",async()=>{f+=1,y(),m();const t=Date.now(),e=2e3;try{const o=await _(D,f);if(o.length===0){c.error({title:"Error",message:"No more products found.",position:"topCenter"}),m();return}R(o)}catch{c.error({title:"Error",message:"Failed to load products.",position:"topCenter"})}finally{const o=Date.now()-t,s=e-o;s>0?setTimeout(()=>{l(),a()},s):(a(),l())}});r.clearSearchBtnEl.addEventListener("click",()=>{r.inputEl.value="",f=1,c.info({title:"Info",message:"Search cleared.",position:"topCenter"})});r.productsListEl.addEventListener("click",async t=>{const e=t.target.closest(".products__item");if(!e)return;const o=e.dataset.id;if(o)try{y();const s=await C(o);E(s)}catch(s){c.error({title:"Error",message:"Failed to load product details.",position:"topCenter"}),console.error("Error loading product:",s)}finally{a()}});
//# sourceMappingURL=index.js.map
