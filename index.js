import{s as f,u as y,i as E,a as L,h as v,r as o,c as g,b as i,d as u,f as w,e as n,g as c,j as p,k as m,l as d,m as C,n as M,o as P,p as T,q as k,t as B,v as _}from"./assets/render-function-h_8FbhVK.js";import{i as s}from"./assets/vendor-4yCzdkXl.js";document.addEventListener("DOMContentLoaded",async()=>{f(),y(),await new Promise(r=>setTimeout(r,100));try{await E(),L()}catch(r){console.error("Помилка під час ініціалізації сторінки:",r.message)}finally{v(),document.getElementById("content").classList.remove("is-hidden")}});let b="",l=1;o.categoriesListEl.addEventListener("click",async r=>{if(r.target===r.currentTarget)return;const a=r.target.dataset.category;if(!a)return;o.categoriesListEl.querySelectorAll(".categories__btn").forEach(t=>t.classList.remove("categories__btn--active")),r.target.classList.add("categories__btn--active"),l=1,g(),i(),u();try{const t=await w(a);if(t.length===0){s.error({title:"Error",message:"No products found in this category.",position:"topCenter"}),n();return}c.length=0,c.push(...t),p();const h=m(t);o.productsListEl.insertAdjacentHTML("beforeend",h),d()}catch(t){console.error("Error fetching products:",t.message)}finally{n()}});o.formEl.addEventListener("submit",async r=>{r.preventDefault();const a=o.inputEl.value.trim();if(!a){s.error({title:"Error",message:"Please enter a search query.",position:"topCenter"});return}g(),i(),u();try{const e=await C(a);if(!e||e.length===0){M();return}P(),c.length=0,c.push(...e),p();const t=m(e);o.productsListEl.insertAdjacentHTML("beforeend",t),d()}catch(e){console.error("Search error:",e.message),s.error({title:"Error",message:"Something went wrong. Please try again.",position:"topCenter"})}finally{n(),o.formEl.reset()}});o.loadMoreBtn.addEventListener("click",async()=>{l+=1,u(),i();const r=Date.now(),a=2e3;try{const e=await T(b,l);if(e.length===0){s.error({title:"Error",message:"No more products found.",position:"topCenter"}),i();return}k(e)}catch{s.error({title:"Error",message:"Failed to load products.",position:"topCenter"})}finally{const e=Date.now()-r,t=a-e;t>0?setTimeout(()=>{d(),n()},t):(n(),d())}});o.clearSearchBtnEl.addEventListener("click",()=>{o.inputEl.value="",l=1,s.info({title:"Info",message:"Search cleared.",position:"topCenter"})});o.productsListEl.addEventListener("click",async r=>{const a=r.target.closest(".products__item");if(!a)return;const e=a.dataset.id;if(e)try{u();const t=await B(e);_(t)}catch(t){s.error({title:"Error",message:"Failed to load product details.",position:"topCenter"}),console.error("Error loading product:",t)}finally{n()}});
//# sourceMappingURL=index.js.map
