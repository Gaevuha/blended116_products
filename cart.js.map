{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//cart.js\n\n//Логіка сторінки Cart\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getCart, updateCartCount } from './js/storage.js';\nimport { createMarkupProducts } from './js/render-function.js';\nimport {\n    showNotFoundMessage,\n    hideNotFoundMessage,\n    showLoader,\n    hideLoader,\n} from './js/handlers.js';\nimport { refs } from './js/refs.js';\n  import { fetchProductById } from './js/products-api.js';\nimport { openModal } from './js/modal.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    renderCartProducts();  \n    updateCartCount();\n});\n\nfunction renderCartProducts() {\n    const cartItems = getCart();\n    const list = document.querySelector('.products');\n  \n    list.innerHTML = ''; // очищаємо список\n  \n    if (cartItems.length === 0) {\n      showNotFoundMessage();\n      updateSummary(cartItems); // Показати нульові значення\n      return;\n    }\n  \n    hideNotFoundMessage();\n  \n    const markup = createMarkupProducts(cartItems);\n    list.insertAdjacentHTML('beforeend', markup);\n  \n    updateSummary(cartItems);\n  }\n  \n\nfunction updateSummary(cartItems) {\n  const countEl = document.querySelector('[data-count]');\n  const priceEl = document.querySelector('[data-price]');\n  const totalCount = cartItems.length;\n  const totalPrice = cartItems.reduce((sum, item) => sum + item.price, 0);\n\n  countEl.textContent = totalCount;\n  priceEl.textContent = `$${totalPrice.toFixed(2)}`;\n}\n\n// Додаємо обробник події для відкриття модального вікна з деталями продукту\nrefs.cartPageProduct.addEventListener('click', async (e) => {\n    const productCard = e.target.closest('.products__item');\n    if (!productCard) return;\n\n    const productId = productCard.dataset.id;\n    if (!productId) return;\n\n    try {\n        showLoader();\n        const product = await fetchProductById(productId);\n        openModal(product); // Показ модального вікна з деталями\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to load product details.',\n            position: 'topCenter',\n        });\n        console.error('Error loading product:', error);\n    } finally {\n        hideLoader();\n    }\n});\n\n\nrefs.buyBtn.addEventListener('click', () => {\n  const cartItems = getCart();\n\n  if (cartItems.length === 0) {\n    iziToast.warning({\n      title: 'Cart is empty',\n      message: 'Please add products before buying.',\n      position: 'topCenter',\n    });\n    return;\n  }\n\n  iziToast.success({\n    title: 'Success',\n    message: 'Thank you for your purchase!',\n    position: 'topCenter',\n  });\n\n  // Очистити кошик\n  localStorage.removeItem('cart');\n  renderCartProducts();\n  updateCartCount();\n});\n"],"names":["renderCartProducts","updateCartCount","cartItems","getCart","list","showNotFoundMessage","updateSummary","hideNotFoundMessage","markup","createMarkupProducts","countEl","priceEl","totalCount","totalPrice","sum","item","refs","e","productCard","productId","showLoader","product","fetchProductById","openModal","error","iziToast","hideLoader"],"mappings":"wKAkBA,SAAS,iBAAiB,mBAAoB,IAAM,CAChDA,IACAC,GACJ,CAAC,EAED,SAASD,GAAqB,CAC1B,MAAME,EAAYC,IACZC,EAAO,SAAS,cAAc,WAAW,EAI/C,GAFAA,EAAK,UAAY,GAEbF,EAAU,SAAW,EAAG,CAC1BG,IACAC,EAAcJ,CAAS,EACvB,MACD,CAEDK,IAEA,MAAMC,EAASC,EAAqBP,CAAS,EAC7CE,EAAK,mBAAmB,YAAaI,CAAM,EAE3CF,EAAcJ,CAAS,CACxB,CAGH,SAASI,EAAcJ,EAAW,CAChC,MAAMQ,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAaV,EAAU,OACvBW,EAAaX,EAAU,OAAO,CAACY,EAAKC,IAASD,EAAMC,EAAK,MAAO,CAAC,EAEtEL,EAAQ,YAAcE,EACtBD,EAAQ,YAAc,IAAIE,EAAW,QAAQ,CAAC,CAAC,EACjD,CAGAG,EAAK,gBAAgB,iBAAiB,QAAS,MAAOC,GAAM,CACxD,MAAMC,EAAcD,EAAE,OAAO,QAAQ,iBAAiB,EACtD,GAAI,CAACC,EAAa,OAElB,MAAMC,EAAYD,EAAY,QAAQ,GACtC,GAAKC,EAEL,GAAI,CACAC,IACA,MAAMC,EAAU,MAAMC,EAAiBH,CAAS,EAChDI,EAAUF,CAAO,CACpB,OAAQG,EAAO,CACZC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,kCACT,SAAU,WACtB,CAAS,EACD,QAAQ,MAAM,yBAA0BD,CAAK,CACrD,QAAc,CACNE,GACH,CACL,CAAC,EAGDV,EAAK,OAAO,iBAAiB,QAAS,IAAM,CAG1C,GAFkBb,IAEJ,SAAW,EAAG,CAC1BsB,EAAS,QAAQ,CACf,MAAO,gBACP,QAAS,qCACT,SAAU,WAChB,CAAK,EACD,MACD,CAEDA,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,+BACT,SAAU,WACd,CAAG,EAGD,aAAa,WAAW,MAAM,EAC9BzB,IACAC,GACF,CAAC"}