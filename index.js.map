{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/home.js"],"sourcesContent":["// src/js/products-api.js\n\n// Функції для роботи з бекендом\nimport axios from 'axios';\n\nexport async function fetchProductCategories() {\n    const API_URL_CATEGORY = 'https://dummyjson.com/products/category-list';\n  try {\n    const response = await axios.get(API_URL_CATEGORY);\n    return response.data; // повертає масив категорій\n  } catch (error) {\n    console.error('Помилка під час отримання категорій:', error.message);\n    throw error;\n  }\n}\n\nexport async function fetchProductsByCategory(category) {\n    // Встановлюємо поточну сторінку (статично — завжди 1)\n    const currentPage = 1;\n\n    // Формуємо URL для отримання 12 продуктів зі зміщенням відповідно до сторінки (skip = 0)\n    const API_URL_PRODUCTS = `https://dummyjson.com/products/category/${category}?limit=12&skip=${(currentPage - 1) * 12}`;\n\n    try {\n        // Виконуємо GET-запит до API\n        const response = await axios.get(API_URL_PRODUCTS);\n\n        // Повертаємо тільки масив продуктів із відповіді\n        return response.data.products;\n\n    } catch (error) {\n        // Якщо сталася помилка — виводимо повідомлення\n        console.error('Помилка під час отримання продуктів:', error.message);\n\n        // Передаємо помилку далі\n        throw error;\n    }\n}\n\nexport async function fetchAllProducts() {\n    // Встановлюємо поточну сторінку (статично — завжди 1)\n    const currentPage = 1;\n\n    // Формуємо URL для отримання 12 продуктів зі зміщенням відповідно до сторінки (skip = 0)\n    const API_URL_PRODUCTS = `https://dummyjson.com/products?limit=12&skip=${(currentPage - 1) * 12}`;\n\n    try {\n        // Виконуємо GET-запит до API\n        const response = await axios.get(API_URL_PRODUCTS);\n\n        // Повертаємо тільки масив продуктів із відповіді\n        return response.data.products;\n\n    } catch (error) {\n        // Якщо сталася помилка — виводимо повідомлення\n        console.error('Помилка під час отримання продуктів:', error.message);\n\n        // Передаємо помилку далі\n        throw error;\n    }\n}","// File: src/js/refs.js\n\n//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n    formEl: document.querySelector('.search-form'),\n    inputEl: document.querySelector('.search-form__input'),\n    clearSearchBtnEl: document.querySelector('.search-form__btn-clear'),\n    searchBtnEl: document.querySelector('.search-form__btn'),\n    categoriesListEl: document.querySelector('.categories'),\n    productsListEl: document.querySelector('.products'),\n    loadMoreBtn: document.querySelector('.btn'),\n    loaderEl: document.querySelector('.loader'),\n    modalEl: document.querySelector('.modal'),\n    modalCloseBtnEl: document.querySelector('.modal__close-btn'),\n    modalContentEl: document.querySelector('.modal__content'),\n    modalOverlayEl: document.querySelector('.modal__overlay'),\n};\n","// src/js/render-function.js\n\nimport { fetchProductCategories, fetchAllProducts } from './products-api.js';\nimport { refs } from './refs.js';\n\n//Функції для створення, рендеру або видалення розмітки\nconst listProducts = document.querySelector('.products');\n// Функція для створення розмітки категорій\nexport function createMarkupCategories(categories) {\n    return categories\n        .map(category => {\n            return `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\" data-category=\"${category}\">${category}</button>\n </li>\n`\n        }).join('');\n}\n// Функція для створення розмітки продуктів\nexport function createMarkupProducts(products) {\n    return products\n        .map(product => {\n            return `<li class=\"products__item\" data-id=\"${product.id}\">\n                  <img class=\"products__image\" src=\"${product.thumbnail}\" alt=\"${product.title}\"/>\n                   <p class=\"products__title\">${product.title}</p>\n                    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: </span>${product.brand}</p>\n                    <p class=\"products__category\">Category: ${product.category}</p>\n                    <p class=\"products__price\">Price: ${product.price} $</p>\n </li>\n`   }).join('');\n}\n\n// Функція для ініціалізації сторінки (отримання даних і рендеринг)\nexport async function initPage() {\n  try {\n    // Отримуємо категорії і продукти\n    const categories = await fetchProductCategories();\n    const products = await fetchAllProducts();\n\n    // Створюємо розмітку категорій і продуктів\n    const categoriesMarkup = createMarkupCategories(categories);\n    const productsMarkup = createMarkupProducts(products);\n\n    // Вставляємо розмітку в DOM\n    const categoriesList = document.querySelector('.categories');\n    const productsList = document.querySelector('.products');\n    \n    categoriesList.insertAdjacentHTML('beforeend', categoriesMarkup);\n    productsList.insertAdjacentHTML('beforeend', productsMarkup);\n      \n      showLoadMoreBtn();\n  \n  } catch (error) {\n    console.error('Помилка при ініціалізації сторінки:', error.message);\n  }\n}\n\n// Функція для очищення розмітки продуктів\nexport function clearMarkupProducts() {\n    listProducts.innerHTML = '';\n}\n// Функція для відображення кнопки \nexport function showLoadMoreBtn() {\n    if (refs.loadMoreBtn) {\n        refs.loadMoreBtn.classList.remove('is-hidden');\n        refs.loadMoreBtn.classList.add('is-visible');\n    }\n}\n\n// Функція для приховування кнопки \nexport function hideLoadMoreBtn() {\n    if (refs.loadMoreBtn) {\n        refs.loadMoreBtn.classList.add('is-hidden');\n        refs.loadMoreBtn.classList.remove('is-visible');\n    }\n}\n\n// Функція для відображення лоадера\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('is-hidden');\n    loader.classList.add('is-visible');\n  }\n}\n// Функція для приховування лоадера\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('is-hidden');\n    loader.classList.remove('is-visible');\n  }\n}\n\n// Функція додавання елементів на стлорінку по кліку на кнопку 'Load more'\nexport async function addLoadMoreProducts(products) {\n    try {\n        const products = await fetchAllProducts();\n        const markup = createMarkupProducts(products);\n        listProducts.insertAdjacentHTML('beforeend', markup);\n    } catch (error) {\n        console.error('Error fetching products:', error.message);\n    }\n}\n","// src/js/home.js\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchProductCategories, fetchProductsByCategory, fetchAllProducts } from './js/products-api.js';\nimport {\n    createMarkupCategories,    \n    createMarkupProducts,\n    clearMarkupProducts,\n    initPage,\n    showLoadMoreBtn,\n    hideLoadMoreBtn,\n    showLoader,\n    hideLoader,\n    addLoadMoreProducts\n} from \"./js/render-function\";\nimport { refs } from './js/refs.js';\n\ninitPage();\n\n// Змінна для збереження поточного пошукового запиту\nlet currentQuery = '';\n\n// Змінна для відстеження поточної сторінки при пагінації\nlet currentPage = 1;\n\n// Кількість продуктів, які будуть завантажені на одну сторінку\nconst IMAGES_PER_PAGE = 12;\n\n// Додаємо обробник події на категорії\nrefs.categoriesListEl.addEventListener('click', async (e) => {\n    if (e.target === e.currentTarget) return\n    // Отримуємо ID категорії з атрибута data-id\n    const categoryName = e.target.dataset.category;\n\n    // Якщо ID не вказано — виходимо з функції\n    if (!categoryName) return;\n\n    // Скидаємо номер сторінки на 1\n    currentPage = 1;\n\n    // Якщо запит валідний:\n    clearMarkupProducts();  \n    hideLoadMoreBtn();\n    showLoader();\n    try {\n        const products = await fetchProductsByCategory(categoryName);\n    \n        if (products.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'No products found in this category.',\n                position: 'topCenter',\n            });\n            hideLoader();\n            return;\n        }\n\n         // Якщо продукти знайдені — створюємо HTML-розмітку\n        const markup = createMarkupProducts(products);\n\n        // Вставляємо згенеровану розмітку в DOM\n        refs.productsListEl.insertAdjacentHTML('beforeend', markup);\n\n        // Показуємо кнопку \"Load More\" для завантаження наступної сторінки\n        showLoadMoreBtn();\n\n    } catch (error) {\n        console.error('Error fetching products:', error.message);\n    } finally {\n        hideLoader(); // Ховаємо анімацію завантаження\n    }\n});\n// Додаємо обробник події на форму (пошуковий запит)\nrefs.formEl.addEventListener('submit', async (e) => {\n    e.preventDefault(); // Відміняємо стандартну поведінку форми (перезавантаження сторінки)\n\n    // Отримуємо значення з поля вводу та обрізаємо зайві пробіли\n    currentQuery = refs.inputEl.value.trim();\n\n    // Якщо поле порожнє — показуємо повідомлення про помилку і зупиняємо виконання\n    if (!currentQuery) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.', // Повідомлення для користувача\n            position: 'topCenter',                   // Позиція повідомлення\n        });\n        return; // Виходимо з функції\n    }\n\n    // Якщо запит валідний:\n    currentPage = 1;           // Скидаємо лічильник сторінок на першу\n    clearMarkupProducts();     // Очищаємо попередні результати зі сторінки\n    showLoader();              // Показуємо анімацію завантаження (спінер)\n\n    try {\n        // Виконуємо запит до API на отримання продуктів (за пошуковим запитом, сторінкою і лімітом)\n        const products = await fetchAllProducts(currentQuery, currentPage, IMAGES_PER_PAGE);\n\n        // Якщо нічого не знайдено — показуємо повідомлення про помилку\n        if (products.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'No products found.', // Текст повідомлення\n                position: 'topCenter',         // Позиція\n            });\n            hideLoader(); // Ховаємо анімацію завантаження\n            return;       // Виходимо з функції\n        }\n\n        // Якщо продукти знайдені — створюємо HTML-розмітку\n        const markup = createMarkupProducts(products);\n\n        // Вставляємо згенеровану розмітку в DOM\n        refs.productsListEl.insertAdjacentHTML('beforeend', markup);\n\n        // Показуємо кнопку \"Load More\" для завантаження наступної сторінки\n        showLoadMoreBtn();\n\n    } catch (error) {\n        // Якщо сталася помилка при запиті — лог у консоль\n        console.error('Error fetching products:', error.message);\n\n    } finally {\n        // У будь-якому випадку (успіх або помилка) — ховаємо лоадер і скидаємо форму\n        hideLoader();         // Ховаємо анімацію завантаження\n        refs.formEl.reset();  // Очищаємо форму пошуку\n    }\n});\n\n// Додаємо обробник події на кнопку \"Load More\"\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  // Збільшуємо номер сторінки — це дозволяє завантажити наступну \"партію\" товарів\n  currentPage += 1;\n\n  // Показуємо індикатор завантаження\n    showLoader();\n    hideLoadMoreBtn();   \n\n  // Встановлюємо мінімальний час показу лоадера (2 секунди)\n  const startTime = Date.now();\n  const MIN_LOADER_TIME = 2000;\n\n  try {\n    // Отримуємо продукти за поточним запитом і сторінкою\n    const products = await fetchAllProducts(currentQuery, currentPage);\n\n    // Якщо нових продуктів немає, показуємо повідомлення і ховаємо кнопку\n    if (products.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'No more products found.',\n        position: 'topCenter',\n      });\n      hideLoadMoreBtn();\n      return;\n    }\n\n    // Рендеримо продукти до DOM (ця функція має вставити нову порцію продуктів)\n    addLoadMoreProducts(products);\n\n  } catch (error) {\n    // Якщо сталася помилка — виводимо повідомлення\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load products.',\n      position: 'topCenter',\n    });\n  } finally {\n    // Забезпечуємо мінімальний час відображення лоадера\n    const elapsedTime = Date.now() - startTime;\n    const remainingTime = MIN_LOADER_TIME - elapsedTime;\n\n    if (remainingTime > 0) {\n        setTimeout(() => {\n        showLoadMoreBtn();\n        hideLoader();\n      }, remainingTime);\n    } else {\n        hideLoader();\n        showLoadMoreBtn();\n    }\n  }\n});\n\n// Додаємо обробник події на кнопку очищення пошуку\nrefs.clearSearchBtnEl.addEventListener('click', () => {\n    // Очищаємо поле вводу\n    refs.inputEl.value = '';\n\n    // Очищаємо список продуктів\n    clearMarkupProducts();\n\n    // Ховаємо кнопку \"Load More\"\n    hideLoadMoreBtn();\n\n    // Скидаємо номер сторінки на 1\n    currentPage = 1;\n\n    // Показуємо повідомлення про очищення пошуку\n    iziToast.info({\n        title: 'Info',\n        message: 'Search cleared.',\n        position: 'topCenter',\n    });\n});\n\n\n"],"names":["fetchProductCategories","API_URL_CATEGORY","axios","error","fetchProductsByCategory","category","API_URL_PRODUCTS","fetchAllProducts","refs","listProducts","createMarkupCategories","categories","createMarkupProducts","products","product","initPage","categoriesMarkup","productsMarkup","categoriesList","productsList","showLoadMoreBtn","clearMarkupProducts","hideLoadMoreBtn","showLoader","loader","hideLoader","addLoadMoreProducts","markup","currentQuery","currentPage","IMAGES_PER_PAGE","e","categoryName","iziToast","startTime","MIN_LOADER_TIME","elapsedTime","remainingTime"],"mappings":"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"}